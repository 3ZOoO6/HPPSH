
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>بوت HPPSH الذكي</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background-color: #0f0f0f;
      font-family: 'Courier New', monospace;
    }
    .bot {
      background-color: #1e293b;
      color: #00ffcc;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 10px;
      max-width: 80%;
    }
    .user {
      background-color: #334155;
      color: #ffffff;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 10px;
      margin-right: auto;
      max-width: 80%;
    }
  </style>
</head>
<body class="text-white p-4">
  <div class="max-w-3xl mx-auto mt-6">
    <h1 class="text-3xl mb-4 text-center font-bold text-cyan-400">مساعد HPPSH الذكي</h1>
    <div id="chatBox" class="bg-black/60 p-4 rounded h-[60vh] overflow-y-scroll mb-4 border border-cyan-700"></div>
    <div class="flex gap-2">
      <input id="userInput" type="text" placeholder="اكتب سؤالك للبوت" class="flex-1 p-2 rounded bg-gray-800 text-white">
      <button onclick="askBot()" class="bg-cyan-600 px-4 py-2 rounded hover:bg-cyan-700">أرسل</button>
    </div>
  </div>

  <script>
    const chatBox = document.getElementById("chatBox");
    const userInput = document.getElementById("userInput");

    const apiKey = "AIzaSyAcvGNTQz4cCvHzo0xDRxPPlOgflgxtt3I";
    const endpoint = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

    async function askBot() {
      const text = userInput.value.trim();
      if (!text) return;

      // عرض رسالة المستخدم
      chatBox.innerHTML += `<div class="user text-right">${text}</div>`;
      chatBox.scrollTop = chatBox.scrollHeight;
      userInput.value = "";

      // إرسال إلى Gemini API
      const res = await fetch(endpoint, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
          contents: [{ parts: [{ text }] }]
        })
      });

      const data = await res.json();
      const botReply = data?.candidates?.[0]?.content?.parts?.[0]?.text || "عذرًا، لم أفهم سؤالك.";
      chatBox.innerHTML += `<div class="bot">${botReply}</div>`;
      chatBox.scrollTop = chatBox.scrollHeight;
    }
  </script>
</body>
</html>
